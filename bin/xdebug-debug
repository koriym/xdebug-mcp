#!/usr/bin/env php
<?php

declare(strict_types=1);

use Koriym\XdebugMcp\DebugServer;
(function () use ($argv){
    require_once __DIR__ . '/autoload.php';
    $script = $argv[1] ?? throw new RuntimeException("Script file is required");
    $targetScript = file_exists($script) ? $script : throw new RuntimeException("Script not found: $script");

    $server = new DebugServer($targetScript, 9004); // Auto-detect first line starting with [a-z]
    $server();
})();
